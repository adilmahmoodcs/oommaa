<h1>
  Brands
  <% if term = params.dig(:q, :name_cont).presence %>
    (matching '<%= term %>')
  <% else %>
    (all)
  <% end %>
</h1>

<%= form_for Brand.new, html: { class: "form-inline" } do |f| %>
  <div class="input-group mb-2 mr-sm-2 mb-sm-0">
    <div class="input-group-addon"><%= icon("plus") %></div>
    <%= f.text_field :name,
                     class: "form-control fast-add-form mb-2 mr-sm-2 mb-sm-0",
                     placeholder: "Name" %>
  </div>
  <%= f.button class: "btn btn-primary" do %>
    <%= icon("plus") %>
    Add New
  <% end %>
<% end %>

<hr>

<%= search_form_for @q, class: "form-inline" do |f| %>
  <div class="input-group mb-2 mr-sm-2 mb-sm-0">
    <div class="input-group-addon"><%= icon("search") %></div>
    <%= f.search_field :name_cont,
                       class: "form-control fast-add-form mb-2 mr-sm-2 mb-sm-0",
                       placeholder: "Search term" %>
  </div>
  <%= button_tag class: "btn btn-primary" do %>
    <%= icon("search") %>
    Search
  <% end %>
  &nbsp;
  <%= link_to url_for, class: "btn btn-secondary" do %>
    <%= icon("eraser") %>
    Clear search
  <% end %>
<% end %>

<hr>

<%= paginate @brands %>

<table class="table table-hover table-bordered">
  <thead>
    <tr>
      <th>Logo</th>
      <th><%= sort_link(@q, :name_case_insensitive, "Name") %></th>
      <th>Licensor</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @brands.each do |brand| %>
      <tr>
        <td>
          <%= image_tag brand.logo.url(:thumb), width: "100px" %>
        </td>
        <td>
          <%= brand.name %>
        </td>
        <td>
          <%= brand.licensor&.name %>
        </td>
        <td class="text-right">
          <%= link_to edit_brand_path(brand),
                      class: "btn btn-secondary btn-sm" do %>
            <%= icon("pencil") %>
            Edit
          <% end %>
          <%= link_to brand,
                      method: :delete,
                      data: { confirm: 'Are you sure?' },
                      class: "btn btn-danger btn-sm" do %>
            <%= icon("trash") %>
            Delete
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @brands %>
